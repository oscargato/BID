<h1>Alta de Funcionario</h1>

<div class="card card-custom gutter-b">
    <div class="card-header py-3">      
      <div class="card-title align-items-start flex-column">
        <h3 class="card-label font-weight-bolder text-dark"></h3>
        <span class="text-muted font-weight-bold font-size-sm mt-1"></span>
      </div>

      <div class="card-toolbar">
        <a routerLink="/tramites/tramites-adm/tramites-adm"
           class="btn btn-light-danger font-weight-bold mr-2 text-uppercase px-9 py-4" 
           style="float:right">
           Cancelar
        </a>
      </div>
    </div>
    
    <div class="card-body">
        <div class="wizard-body ">          
          <div class="row">
            <div class="offset-xxl-2 col-xxl-8">
              <form [formGroup]="formulario" class="form" id="kt_form">
                <h5 class="mb-4 font-weight-bold text-dark">Datos del Funcionario</h5>
                <div class="row">
                  <div class="col-md-6">
                    <div class="form-group">
                      <label class="font-weight-bolder">Tipo de Funcionario</label>
                      <select name="tipoFuncinario"
                              formControlName="tipoFuncinario"
                              class="form-control"
                              [(ngModel)]="indexFunc"                                
                              #tipoFuncinario
                              (change)='tipoFuncionario(tipoFuncinario.value)'>
                              <option selected value="-1">Seleccione una opción</option>                              
                              <option [value]="i" *ngFor="let item of TiposFuncionarios; let i = index">
                                {{ item.nombre }}
                              </option>                      
                      </select>
                    </div>
                    <div *ngIf="formulario.controls['tipoFuncinario'].value == -1 && (formulario.controls['tipoFuncinario'].dirty || formulario.controls['tipoFuncinario'].touched)">
                      <div class="d-flex justify-content-end" style="color:#FF0000;">
                        <span>Se requiere el Tipo de Funcionario</span> 
                      </div>
                    </div> 
                  </div>
                  
                  <div class="col-md-6">
                    <div class="form-group">
                      <label class="font-weight-bolder">Provincia</label>
                      <select name="provincia"
                              formControlName="provincia"
                              class="form-control"
                              [(ngModel)]="indexProv"
                              #valorProvincia
                              (change)='getCargaDistritos(valorProvincia.value)'>
                          <option selected value="-1">Seleccione una opción</option>                              
                          <option [value]="i" *ngFor="let item of provincias; let i = index">
                                  {{ item.nomProvincia }}
                          </option>                                                                                                                       
                      </select>
                    </div>
                    <div *ngIf="formulario.controls['provincia'].value == -1 && (formulario.controls['provincia'].dirty || formulario.controls['provincia'].touched)">
                      <div class="d-flex justify-content-end" style="color:#FF0000;">
                        <span>Se requiere la Provincia</span> 
                      </div>
                    </div>
                  </div>                
                </div>
        
                <div class="row">
                  <div class="col-md-6">
                    <div class="form-group">
                      <label class="font-weight-bolder">Nombre Completo</label>
                      <input type="text"
                             class="form-control"
                             name="nombre"
                             formControlName="nombre"
                             placeholder="Nombre Completo"/>
                             <div *ngIf="formulario.controls['nombre'].invalid && (formulario.controls['nombre'].dirty || formulario.controls['nombre'].touched)">
                              <div class="d-flex justify-content-end" style="color:#FF0000;">
                                <span>Se requiere el Nombre Completo</span> 
                              </div>
                             </div>                                                            
                    </div>                       
                  </div>
                    
                  <div class="col-md-6">
                    <div class="form-group">
                      <label class="font-weight-bolder">Correo Electrónico</label>
                      <input  class="form-control"
                              type="email"
                              name="email"
                              placeholder="correo@correo.com"
                              formControlName="email"
                              autocomplete="off"/>
                              <div *ngIf="formulario.controls['email'].invalid && (formulario.controls['email'].dirty || formulario.controls['email'].touched)">
                                <div class="d-flex justify-content-end" style="color:#FF0000;">
                                  <span>Se requiere el Correo Electrónico</span> 
                                </div>
                              </div>                        
                    </div>
                  </div>                
                </div>

                <div class="row">
                  <div class="col-md-6">
                    <div class="form-group">
                      <label class="font-weight-bolder">Contraseña</label>
                      <input class="form-control"
                             type="password"
                             maxlength="20"
                             [(ngModel)]="clave"
                             (input)="validatePassword()"                                 
                             placeholder="Confirmar contraseña"
                             name="password"                
                             formControlName="password"
                             autocomplete="off"/>                             
                             <div *ngIf="formulario.controls['password'].invalid && (formulario.controls['password'].dirty || formulario.controls['password'].touched)">
                              <div class="d-flex justify-content-end" style="color:#FF0000;">
                                <span>Se requiere la Contraseña</span> 
                              </div>
                             </div>
                    </div>
                    <div>
                      <label>Contraseña Segura   <u class="text-primary" (click)="verRequerimientos()">Ver</u></label>
                      <div *ngIf="ver">
                        <div class="card">
                          <div class="card-body">
                            <label>La contraseña debe cumplir con los siguientes requerimientos:</label>  
                            <ul class="ul">              
                              <li [ngClass]="{'correcto':letraMayuscula,'incorrecto':!letraMayuscula}"><i [ngClass]="{'correcto':letraMayuscula,'incorrecto':!letraMayuscula}" class="far fa-check-circle"></i> Al menos una letra Mayúscula</li>
                              <li [ngClass]="{'correcto':letraMinuscula,'incorrecto':!letraMinuscula}"><i [ngClass]="{'correcto':letraMinuscula,'incorrecto':!letraMinuscula}" class="far fa-check-circle"></i> Al menos una letra minúscula</li>
                              <li [ngClass]="{'correcto':unNumero,'incorrecto':!unNumero}"><i [ngClass]="{'correcto':unNumero,'incorrecto':!unNumero}" class="far fa-check-circle"></i> Al menos un número</li>
                              <li [ngClass]="{'correcto':unCaracter,'incorrecto':!unCaracter}"><i [ngClass]="{'correcto':unCaracter,'incorrecto':!unCaracter}" class="far fa-check-circle"></i> Al menos un caracter especial</li>
                              <li [ngClass]="{'correcto':minimoCaracteres,'incorrecto':!minimoCaracteres}"><i [ngClass]="{'correcto':minimoCaracteres,'incorrecto':!minimoCaracteres}" class="far fa-check-circle"></i> Mínimo 8 caracteres</li>                            
                              <li [ngClass]="{'correcto':maximoCaracteres,'incorrecto':!maximoCaracteres}"><i [ngClass]="{'correcto':maximoCaracteres,'incorrecto':!maximoCaracteres}" class="far fa-check-circle"></i> Máximo 20 caracteres</li>                              
                            </ul>            
                          </div>
                        </div>        
                      </div>
                    </div> 
                  </div>                                                   
                </div>
                
                <div class="py-10" data-wizard-type="step-content">
                  <h5 class="mb-5 font-weight-bold text-dark">Instituciones y Trámites</h5>



                  <div class="row">
                    <div class="col-md-6">
                      <div class="form-group">
                        <label class="font-weight-bolder">Distrito</label>
                        <select name="distrito"
                                formControlName="distrito"
                                class="form-control"
                                [(ngModel)]="indexDist"
                                #valorDistrito
                                (change)='changeDistrito(valorDistrito.value)'>
                            <option selected value="-1">Seleccione una opción</option>                              
                            <option [value]="i" *ngFor="let item of dist; let i = index">
                                    {{ item.nomDistrito }}
                            </option>                                                                                                                       
                        </select>                           
                      </div>
                      <div *ngIf="formulario.controls['distrito'].value == -1 && (formulario.controls['distrito'].dirty || formulario.controls['distrito'].touched)">
                        <div class="d-flex justify-content-end" style="color:#FF0000;">
                          <span>Se requiere el Distrito</span> 
                        </div>
                      </div>                       
                    </div>
                      
                    <div class="col-md-6">
                      <div class="form-group">
                        <label class="font-weight-bolder">Seleccionar Tramites</label>                        
                        <div class="table-responsive">
                          <table class="table table-hover">
                            <thead>        
                              <tr>
                                <th>Nombre</th>
                                <th class="text-center">Seleccionar</th>                                                                                                                                                        
                              </tr>
                            </thead>
                            
                            <tbody>
                              <tr *ngFor="let item of tramites let indice=index">
                                <td>{{ item.obj.nombre }}</td>
                                <td class="text-center"><input type="checkbox" (click)="seleccionar(indice)"></td>                                    
                              </tr>         
                            </tbody>
                          </table>
                        </div>                     
                      </div>
                    </div>                
                  </div>                                                               
                </div>        
                <div class="d-flex justify-content-between border-top pt-10">
                    <div class="mr-2"></div>
                    <div>
                      <button (click)="crearRevisor()"
                              class="btn btn-success font-weight-bold text-uppercase px-9 py-4"
                              data-wizard-type="action-submit"
                              [disabled]="formulario.invalid || 
                                          formulario.controls['tipoFuncinario'].value == -1 ||
                                          formulario.controls['provincia'].value == -1 ||
                                          formulario.controls['distrito'].value == -1 ||
                                          passValido == false ||
                                          trm == false">
                              Crear Funcionario
                      </button>
                    </div>
                </div>
              </form>    
            </div>
          </div>
        </div>
    </div>
</div>
  